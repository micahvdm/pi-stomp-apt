#!/usr/bin/make -f
# You must remove unused comment lines for the released package.
export DH_VERBOSE=1


%:
	dh $@ --with python3 --buildsystem=pybuild

override_dh_auto_install:
	PYBUILD_INSTALL_ARGS="--prefix=/usr/local" pybuild --install
	mkdir -p debian/mod-ui/local/lib/
	mv debian/tmp/home/micah/pi-stomp-apt/mod-ui/mod-ui-1.13.1/debian/tmp/usr/lib/python3.11/dist-packages/modtools/libmod_utils.so debian/mod-ui/usr/lib/python3.11/dist-packages/modtools/
	rm -rf debian/tmp/home/
	mv debian/tmp/* debian/mod-ui/
	mv debian/mod-ui/usr/lib/python3.11/ debian/mod-ui/usr/local/lib/
	mv debian/mod-ui/usr/share/ debian/usr/local/
	rm -rf debian/mod-ui/usr/bin/

override_dh_python3:
	dh_python3 --no-ext-rename -O--buildsystem=pybuild

override_dh_auto_test:

override_dh_usrlocal:

override_dh_installsystemd:
	dh_installsystemd --name=mod-ui --restart-after-upgrade
	dh_installsystemd --name=mod-update --no-enable --no-start --no-stop-on-upgrade mod-update.service
	dh_installsystemd --name=mod-update mod-update.path